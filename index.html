<!DOCTYPE html>
<html dir="ltr">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="script.js" defer></script>
    <script>var interval = null;</script> <!-- This lets me clear the interval to avoid duplicate runs on refresh -->
</head>
<body style="direction: ltr; text-align: center;">
<div class="container">
<div id="content">
    <div class="form-wrapper">
        <div class="title-box" style="margin-bottom: 12px;">
            <h2 style="color: #dcdcdc; margin: 0; font-size: 18px;">Percolation Simulation</h2>
        </div>
        <form id="inputs">
            <div class="form-group">
                <label for="gridSize">Grid Size (max 400):</label>
                <input type="number" id="gridSize" value="20" min="1" max="400">
            </div>
            <div class="form-group">
                <label>Simulation Speed:</label>
                <div class="radio-group">
                    <input type="radio" name="speed" value="instant" id="instant">
                    <label class="radio-option" for="instant">Instant</label>
                    <input type="radio" name="speed" value="slow" id="slow">
                    <label class="radio-option" for="slow">Slow</label>
                    <input type="radio" name="speed" value="fast" id="fast" checked>
                    <label class="radio-option" for="fast">Fast</label>
                </div>
            </div>
            <div class="form-group">
                <div class="button-group single-button">
                    <button type="button" id="runBtn" class="btn btn-secondary" onclick="simulatePercolation()">Run Simulation</button>
                </div>
                <div class="button-group dual-button">
                    <button type="button" id="pauseBtn" class="btn btn-secondary btn-small" onclick="togglePause()" disabled>Pause</button>
                    <button type="button" id="resetBtn" class="btn btn-secondary btn-small" onclick="resetSimulation()">Reset</button>
                </div>
            </div>
            <div class="form-group">
                <label for="numSimulations">Number of Simulations for Statistics:</label>
                <input type="number" id="numSimulations" value="10" min="1" max="100">
                <button type="button" id="statsBtn" class="btn btn-secondary" onclick="runStatistics()" style="margin-top: 10px;">Run Statistics</button>
            </div>
        </form>
        <div id="stats">
            <p id="currentPercent">Sites opened: 0% (0/0)</p>
        </div>
        <div id="simulation-result" style="display: none;"></div>
    </div>
    <div class="canvas-wrapper">
        <canvas id="animation" width="400" height="400"></canvas>
    </div>

    <!-- Statistics Modal -->
    <div id="stats-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ðŸ“Š Statistics Results</h2>
                <button class="modal-close" onclick="closeStatsModal()">Ã—</button>
            </div>
            <div id="stats-content"></div>
        </div>
    </div>
</div>
</div>
</body>
</html>